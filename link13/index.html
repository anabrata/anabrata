<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>Candle Timer — V5</title>
<style>
  :root{
    --digit-w: 120px;
    --digit-h: 170px;
    --digit-radius: 16px;
    --split-line: rgba(0,0,0,0.08);
    --gap: clamp(24px, 5vw, 56px);

    /* Background fallback */
    --bg-angle: 135deg;
    --bg-c1: #3a1c71;
    --bg-c2: #d76d77;
    --bg-c3: #ffaf7b;

    /* Flip clock */
    --clock-c1: #ffffff;
    --clock-c2: #ffffff;
    --clock-c3: #ffffff;
    --clock-text: #000000;
    --colon-color: #ffffff;

    /* Candle */
    --wax: #f2e4c7;
    --wick: #1b1b1b;

    /* To‑do */
    --todo-bg: rgba(255,255,255,0.06);
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; display:flex; flex-direction:column; color:#111;
    font-family:"Comic Sans MS", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
    background-image: linear-gradient(var(--bg-angle), var(--bg-c1), var(--bg-c2), var(--bg-c3));
    background-attachment: fixed; background-size: cover; background-position:center;
  }

  .brand{
    position:fixed; left:12px; top:10px; z-index:40; color:#fff;
    font-weight:800; font-size:13px; letter-spacing:.3px;
    text-shadow:0 1px 2px rgba(0,0,0,.35); user-select:none;
  }

  /* ============== Main row: Clock | To‑do | Candle ============== */
  .main{
    flex:1;
    display:grid;
    grid-template-columns: max-content auto max-content; /* clock | todo | candle */
    align-items:center;
    column-gap: var(--gap);
    padding:22px min(5vw,48px);
    position:relative;
  }
  #timer-container{ grid-column:1; }
  #todo-panel     { grid-column:2; justify-self:center; align-self:center; }
  #candle-area    { grid-column:3; }

  /* Center clock → overlay the clock at center; To‑do pinned to LEFT of viewer */
  .center-clock .main{ grid-template-columns: 1fr 0 1fr; }
  .center-clock #timer-container{
    position:absolute; left:50%; top:50%;
    transform:translate(-50%,-50%);
    z-index:5; min-width:0; width:auto; pointer-events:auto;
  }
  .center-clock #todo-panel{
    position:absolute; left:min(48px,5vw); top:50%;
    transform:translateY(-50%);
    justify-self:start;
  }

  /* Only candle → center candle, hide clock, To‑do pinned LEFT */
  .only-candle #timer-container{ display:none !important; }
  .only-candle .main{
    grid-template-columns: 1fr;
    justify-items:center; /* center the only visible grid child (candle) */
  }
  .only-candle #candle-area{
    grid-column:1; justify-self:center;
  }
  .only-candle #todo-panel{
    position:absolute; left:min(48px,5vw); top:50%;
    transform:translateY(-50%);
    justify-self:start;
  }

  /* (Optional) Hide candle toggle, if ever used */
  .candle-off #candle-area{ display:none !important; }

  /* ============== To‑do list ============== */
  #todo-panel{
    display:block;
    max-width: clamp(220px, 26vw, 420px);
    max-height: 60vh;
    font-size: 13px;

    overflow:auto;
    padding:10px 12px;
    border-radius:12px;
    border:1px solid rgba(255,255,255,.12);
    background: var(--todo-bg);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    box-shadow: 0 6px 18px rgba(0,0,0,.16), 0 2px 5px rgba(0,0,0,.1);
    color:#fff;
  }
  #todoTitle{ margin:0 0 6px 0; font-size:12.5px; font-weight:900; letter-spacing:.35px; opacity:.95; }
  #todoList{ margin:0; padding:4px 4px 4px 8px; list-style:none; counter-reset:tdn; }
  #todoList li{ counter-increment:tdn; position:relative; padding-left:28px; margin:4px 0; min-height:20px; }
  #todoList li:before{ content: counter(tdn) "."; position:absolute; left:0; top:0; width:22px; text-align:right; padding-right:6px; font-weight:900; opacity:.9; }
  .todoItem{ display:flex; align-items:center; gap:8px; }
  .todoChk{ appearance:none; width:16px; height:16px; border:2px solid rgba(255,255,255,.75); border-radius:4px; position:relative; cursor:pointer; background:transparent; }
  .todoChk:checked{ background:#22c55e; border-color:#22c55e; }
  .todoChk:checked::after{
    content:""; position:absolute; inset:0;
    background: linear-gradient(45deg, transparent 47%, #fff 47% 53%, transparent 53%), linear-gradient(-45deg, transparent 47%, #fff 47% 53%, transparent 53%);
    transform: scale(.48);
  }
  .todoText{ display:inline-block; min-width:36px; min-height:20px; padding:1px 5px; border-radius:6px; outline:none; color:#fff; caret-color:#fff; }
  .todoText:empty:before{ content:"New task"; opacity:.45; }

  /* ============== Flip clock (visual only for demo) ============== */
  #timer{ display:flex; align-items:center; gap:12px; user-select:none; }
  .digit{
    position:relative; width:var(--digit-w); height:var(--digit-h); perspective:1200px; border-radius:var(--digit-radius); overflow:hidden;
    background: linear-gradient(145deg,var(--clock-c1),var(--clock-c2),var(--clock-c3));
    box-shadow: inset 0 -1px 0 rgba(0,0,0,.05), inset 0 1px 0 rgba(0,0,0,.12);
  }
  .digit .top,.digit .bottom{ position:absolute; left:0; right:0; height:50%; overflow:hidden; backface-visibility:hidden; }
  .digit .top{ top:0; border-bottom:1px solid var(--split-line); }
  .digit .bottom{ bottom:0; border-top:1px solid var(--split-line); }
  .value{ position:absolute; left:0; right:0; height:var(--digit-h); display:flex; align-items:center; justify-content:center; font-weight:900; color:var(--clock-text); font-size: calc(var(--digit-h)*.70); line-height:var(--digit-h); }
  .colon{ display:flex; align-items:center; justify-content:center; width:calc(var(--digit-w)*.33); height:var(--digit-h); font-size:calc(var(--digit-h)*.6); font-weight:900; color:var(--colon-color); text-shadow:0 2px 6px rgba(0,0,0,.25); }

  /* ============== Candle visuals (static) ============== */
  #candle-area{ display:flex; align-items:flex-end; justify-content:flex-end; height:max(380px,42vh); position:relative; }
  .candle-clip{ position:relative; width:180px; height:380px; overflow:hidden; display:flex; align-items:flex-end; justify-content:center; }
  .candle-wrap{ position:absolute; inset:auto 0 0 0; margin:auto; width:180px; height:380px; display:flex; align-items:flex-end; justify-content:center; }
  .wax{ position:absolute; bottom:0; width:150px; height:100%; border-radius:22px; background: linear-gradient(180deg,var(--wax), #e6d9bb); }
  .waxTop{ position:absolute; top:-22px; left:50%; transform:translateX(-50%); width:150px; height:44px; border-radius:50%/62% 62% 38% 38%; background: radial-gradient(65% 55% at 50% 62%, rgba(255,255,255,.52), rgba(255,255,255,.12) 60%, rgba(0,0,0,.10) 100%); }
  .wick{ position:absolute; width:6px; height:30px; background:linear-gradient(180deg,#444,var(--wick)); border-radius:4px; top:-12px; left:50%; transform:translateX(-50%); z-index:4; }
  .flame{
    position:absolute; width:52px; height:110px; z-index:6;
    background: radial-gradient(ellipse at 50% 22%, #fff7c0 0%, #ffe08a 38%, #ffb347 58%, #ff7a00 78%, transparent 80%), radial-gradient(ellipse at 50% 45%, #ffffff 0%, transparent 65%);
    border-radius:50% 50% 38% 38%;
    box-shadow:0 0 18px 6px rgba(255,170,40,.55), 0 0 36px 14px rgba(255,140,0,.40), 0 -20px 28px rgba(255,220,170,.40);
    left:64px; top:-108px;
  }

  /* ============== Demo controls ============== */
  #controls{ display:flex; gap:8px; padding:10px 12px; align-items:center; color:#fff; }
  #controls label{ display:flex; gap:6px; align-items:center; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12); padding:6px 10px; border-radius:10px; }
</style>
</head>
<body>
  <div class="brand">MADE BY ANABRATA — V5</div>

  <div class="main" id="main">
    <!-- Timer -->
    <section id="timer-container" aria-label="Timer">
      <div id="timer">
        <div class="digit"><div class="top"><span class="value">0</span></div><div class="bottom"><span class="value">0</span></div></div>
        <div class="digit"><div class="top"><span class="value">0</span></div><div class="bottom"><span class="value">0</span></div></div>
        <div class="colon">:</div>
        <div class="digit"><div class="top"><span class="value">0</span></div><div class="bottom"><span class="value">0</span></div></div>
        <div class="digit"><div class="top"><span class="value">0</span></div><div class="bottom"><span class="value">0</span></div></div>
      </div>
    </section>

    <!-- To‑do -->
    <section id="todo-panel" aria-label="To‑do list">
      <h4 id="todoTitle">To‑do</h4>
      <ol id="todoList">
        <li><label class="todoItem"><input class="todoChk" type="checkbox"><span class="todoText" contenteditable="true">New task</span></label></li>
      </ol>
    </section>

    <!-- Candle -->
    <section id="candle-area" aria-label="Candle">
      <div class="candle-clip">
        <div class="candle-wrap">
          <div class="wax">
            <div class="waxTop"></div>
            <div class="wick"></div>
          </div>
        </div>
      </div>
      <div class="flame"></div>
    </section>
  </div>

  <!-- Simple demo controls just for the requested modes -->
  <div id="controls">
    <label><input type="checkbox" id="centerClock"> Center clock mode</label>
    <label><input type="checkbox" id="onlyCandle"> Only candle mode</label>
  </div>

<script>
  // Simple, robust class toggling for the two requested modes
  const body = document.body;
  const centerClock = document.getElementById('centerClock');
  const onlyCandle = document.getElementById('onlyCandle');

  function applyModes(){
    // Mutually independent, but if Only candle is on, hiding clock is implied
    body.classList.toggle('center-clock', centerClock.checked);
    body.classList.toggle('only-candle', onlyCandle.checked);
  }

  centerClock.addEventListener('change', applyModes);
  onlyCandle.addEventListener('change', applyModes);

  // Initial state
  applyModes();
</script>
</body>
</html>
